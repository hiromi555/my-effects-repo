import"./modulepreload-polyfill-B5Qt9EMX.js";import{s as I}from"./scrollObserver-BS9xrVi3.js";import{s as T,a as Y,b as k,u as M,c as z,d as q}from"./raycasterHelper-BKYk4TAk.js";import{M as m,D,A as H,C as W}from"./three.module-BS1B3NZB.js";import{G as $}from"./GLTFLoader-C6mNuhKw.js";const j="/my-effects-repo/assets/robot-CtEO3uB8.glb",R=-2.75,b=-.3,d=[new m({color:15597568}),new m({color:61166}),new m({color:16776960})],E=["激おこモード","ハイテンション","観察モード"],B=["#ee0000","#00eeee","#ffff00"],A=1100,l=document.querySelector(".myeffect-point"),p=document.querySelector(".myeffect-point .label"),F=document.querySelector(".myeffect-point .text"),y=I(".myeffect-target-class"),e=z(A),{scene:c,renderer:f}=T("canvas.myeffect-webgl"),o=Y(c,e);function G(){const t=new D(16777215,3);t.position.set(1,1,3),c.add(t)}const{getIntersections:C}=q(c),O=new $;let n,h,u,a,w,s,i=2;function X(){O.load(j,t=>{n=t.scene,w=t.animations,M(n,e.scaleRatio,e.aspectRatio,[.6,.75],[.5,2]),n.position.y=R,n.rotation.y=b,c.add(n),h=n.children[0].children[1],u=n.children[0].children[0],h.material=d[i],u.material=d[i],a=new H(n),s=a.clipAction(t.animations[i]),s.play(),l.classList.add("visible"),F.textContent="ロボットをクリックしてモードをチェンジ!!",p.textContent=E[i],g(),_()},void 0,t=>{console.error("An error occurred loading the model:",t)})}function _(){window.addEventListener("mousemove",x),window.addEventListener("touchmove",x),window.addEventListener("click",U),window.addEventListener("scroll",K),window.addEventListener("resize",N)}function x(t){const r=C(t,o);document.body.classList.toggle("myeffect-pointer",r.length>0)}function U(t){C(t,o).length>0&&J()}function J(){s.stop(),i=(i+1)%w.length,s=a.clipAction(w[i]),s.reset().fadeIn(.5).play(),h.material=d[i],u.material=d[i],p.textContent=E[i],p.style.color=B[i]}function K(){let t=window.scrollY;n&&(n.position.y=R+t/e.height*10,n.rotation.y=b-t/e.height*12,g())}function N(){e.width=window.innerWidth,e.height=window.innerHeight,e.aspectRatio=e.width/e.height,e.scaleRatio=Math.min(e.width/A,1),o.aspect=e.aspectRatio,o.updateProjectionMatrix(),f.setSize(e.width,e.height),f.setPixelRatio(Math.min(window.devicePixelRatio,2)),M(n,e.scaleRatio,e.aspectRatio,[.6,.75],[.5,2]),g()}function g(){const t=n.position.clone().project(o),r=t.x*e.width*.5+e.width/2-l.offsetWidth/2,S=-(t.y*e.height*.5)+e.height/2-l.offsetHeight;l.style.transform=`perspective(3000px) translate3d(${r}px, ${S}px, 50px) rotateY(${n.rotation.y}rad)`}const Q=new W;let L=0,v;function P(){const t=Q.getElapsedTime();v=t-L,L=t,y()&&a&&a.update(v),y()&&f.render(c,o),window.requestAnimationFrame(P)}function V(){k(f,e),G(),X(),P()}V();
